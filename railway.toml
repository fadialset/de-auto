[build]
builder = "nixpacks"
buildCommand = """
  apt-get update && \
  apt-get install -y software-properties-common && \
  add-apt-repository -y ppa:ondrej/php && \
  apt-get update && \
  apt-get install -y php8.2 php8.2-cli php8.2-curl php8.2-mysql php8.2-zip php8.2-xml php8.2-mbstring && \
  curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer && \
  composer install --no-dev && \
  php artisan config:cache && \
  php artisan route:cache && \
  php artisan view:cache
"""

[deploy]
startCommand = "php artisan serve --host=0.0.0.0 --port=$PORT"
healthcheckPath = "/"
healthcheckTimeout = 100
restartPolicyType = "never" 